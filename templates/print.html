<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="{{ lang_id }}" dir="{{ lang_id | text_direction }}">

<head>
    <meta charset="utf-8" />
    <link rel="shortcut icon" type="image/x-icon" href="{{ url_for('static', filename='favicon.ico') }}" />
    <link rel="stylesheet" href="{{ url_for('static', filename='print.css') }}" />
    <meta name="viewport" content="width=device-width" />
    <meta name="generator" content="https://github.com/xi/formularprojekt" />
    <link rel="alternate" href="{{ url_for('formularprojekt.translation_route', lang_id=lang_id, form_id=form_id) }}" />

    <title>{{ 'Formularprojekt' | translate(lang_id, 'meta') }} - {{ forms[form_id].title }}</title>
</head>

<body>
    {% for page in pages %}
    <div class="disclaimer">{{ 'disclaimer' | translate(lang_id, 'meta') | markdown }}</div>

    <div id="page-{{loop.index0}}" class="page">
        {% if page.bg %}
        <img class="page-bg" src="{{ url_for('static', filename='forms/%s/bg-%i.png' % (form_id, loop.index0)) }}" alt="" />
        {% endif %}

        {% for row in page.rows %}
        <span
            class="row layer1"
            style="top: {{row.y1}}px; left: {{row.x1}}px; text-align: {{row.align}}; width: {{row.x2 - row.x1}}px; font-size: {{row.y2 - row.y1}}px;"
        >{{ row.content | translate(lang_id, form_id, default='') | markdown }}</span>
        {% if row.y12 != row.y22 %}
        <span
            class="row layer2"
            style="top: {{row.y12}}px; left: {{row.x12}}px; text-align: {{row.align2}}; width: {{row.x22 - row.x12}}px; font-size: {{row.y22 - row.y12}}px;"
        >{{ row.content | markdown }}</span>
        {% endif %}
        {% endfor %}
    </div>
    {% endfor %}

    <script>
        var el = document.createElement('style');
        el.setAttribute('media', 'screen');
        document.head.appendChild(el);

        var setZoom = function() {
            var zoom = 100 / (640 + 2 * 8) * Math.min(window.outerWidth - 30, 960);
            el.innerHTML = 'body {zoom: ' + zoom + '%; margin: 0 auto;}';
        }

        setZoom();
        window.addEventListener('resize', setZoom);
    </script>
</body>
</html>
